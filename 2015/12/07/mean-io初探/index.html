<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>mean.io初探 | mosquito的个人博客</title>
  <meta name="author" content="mosquito">
  
  <meta name="description" content="最近学习使用了mean架构的一个框架mean.io，在这里记录下学到的东西和遇到的问题，以备后用。
mean.io的安装在安装mean.io之前必须要安装：

mongodb
git
gulp / grunt

之后在npm中输入1npm install -g mean-cil
安装完成后就使用1m">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="mean.io初探"/>
  <meta property="og:site_name" content="mosquito的个人博客"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="mosquito的个人博客" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">mosquito的个人博客</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-12-07T14:57:19.000Z"><a href="/2015/12/07/mean-io初探/">2015-12-07</a></time>
      
      
  
    <h1 class="title">mean.io初探</h1>
  

    </header>
    <div class="entry">
      
        <p>最近学习使用了mean架构的一个框架mean.io，在这里记录下学到的东西和遇到的问题，以备后用。</p>
<h2 id="mean-io_u7684_u5B89_u88C5"><a href="#mean-io_u7684_u5B89_u88C5" class="headerlink" title="mean.io的安装"></a>mean.io的安装</h2><p>在安装mean.io之前必须要安装：</p>
<ul>
<li>mongodb</li>
<li>git</li>
<li>gulp / grunt</li>
</ul>
<p>之后在npm中输入<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g mean-cil</span><br></pre></td></tr></table></figure></p>
<p>安装完成后就使用<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mean init</span><br></pre></td></tr></table></figure></p>
<p>来创建mean.io应用，会被要求输入应用名，之后自动从mean.io的github上复制文件<br>复制完成出现这个  </p>
<p><img src="images/meanInit.png"><br>这里默认选择no，但是创建一个管理员用户会很方便，所以选择yes创建管理员用户<br>在此之前要先打开mongodb，否则会报错  </p>
<p><img src="images/mongodb.png"><br>完成之后进入目录使用 npm install 安装依赖。值得吐槽的是，要装的依赖真是多……  </p>
<p>全部安装完成后第一个mean.io应用就可以使用了，使用<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp</span><br></pre></td></tr></table></figure></p>
<p>启动应用，在浏览器中打开 localhost:3000 即可看到搭建的默认应用，并且由于使用了gulp，在相关文件发生改变时页面会自动重载刷新</p>
<h3 id="u9047_u5230_u7684_u95EE_u9898"><a href="#u9047_u5230_u7684_u95EE_u9898" class="headerlink" title="遇到的问题"></a>遇到的问题</h3><p>mean init 时提示 “Prerequisite not installed: git”<br>官方文档说应当把git的可执行文件路径添加进去，然而并不明白……<br>在 StackOverflow 上找到了不错的解决办法，就是把git重装一遍，在下图界面选择”Use Git from the Windows Command Prompt”即可  </p>
<p><img src="images/gitSetup.png"></p>
<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><p>每次启动应用之前需要先启动mongodb，否则会报错</p>
<h2 id="mean-io_u7684_u6587_u4EF6_u7ED3_u6784"><a href="#mean-io_u7684_u6587_u4EF6_u7ED3_u6784" class="headerlink" title="mean.io的文件结构"></a>mean.io的文件结构</h2><p>主要关注应用目录下的packages文件夹<br>通常会有core和custom两个子文件夹<br>core文件夹中包含的是首页、文章编辑、用户登录注册和管理员界面等<br>custom可以理解为分页面，就像一个新闻页面会有一个首页和每个版块的新闻分页面一样<br>custom里面装的就是这些分页面，并且这些分页面会自动添加到首页的导航栏中  </p>
<h3 id="core_u7684_u6587_u4EF6_u7ED3_u6784"><a href="#core_u7684_u6587_u4EF6_u7ED3_u6784" class="headerlink" title="core的文件结构"></a>core的文件结构</h3><p><img src="images/core.png"></p>
<ul>
<li>admin是管理员界面  </li>
<li>article是文章编辑、发布、展示的界面  </li>
<li>system是首页</li>
<li>users是登录、注册、忘记密码等界面</li>
</ul>
<p>system的结构如下</p>
<p><img src="images/system.png"><br>其中public是客户端</p>
<ul>
<li>assets用于存放样式表和图片</li>
<li>cotroller是angular的控制器，如模块定义、事件监听等</li>
<li>routes是angular路由</li>
<li>views是html视图层</li>
</ul>
<p>server是服务器端</p>
<ul>
<li>controller是node控制器，如模板渲染等</li>
<li>routes是node路由</li>
<li>views使用的模板引擎应该是ejs，是将页面head、foot和主体内容组装起来的关键，其中includes里面存放了页面的head（仅仅就是html结构中head的部分）和foot  layouts中的default.html引用head、foot的相关文件将其组装起来，但是很奇怪并没有对主体内容部分进行渲染，这样最终出来的页面会只有导航栏和管理员菜单（登录后），并且点击导航栏链接切换分页面也不会有任何内容显示。<br>在views目录下还有一个index.html，引用了default.html，并且添加了对主体部分的渲染，这样出来的页面就是一个完整的页面了。</li>
</ul>
<h3 id="custom_u7684_u6587_u4EF6_u7ED3_u6784"><a href="#custom_u7684_u6587_u4EF6_u7ED3_u6784" class="headerlink" title="custom的文件结构"></a>custom的文件结构</h3><p>custom下默认已经有一个子页面 i18n 和另外两个文件夹。按理说这三个都应该是属于子页面被添加到导航栏，但是实际上只有 i18n 被添加了，另外两个并没有。这两个文件夹还不能被移除，否则会报错。i18n这个是样例，新创建的子页面都会和它一样，这个文件夹可以随意移除或是更改名称。</p>
<h2 id="mean-io_u7684_u4F7F_u7528"><a href="#mean-io_u7684_u4F7F_u7528" class="headerlink" title="mean.io的使用"></a>mean.io的使用</h2><h3 id="u521B_u5EFA_u81EA_u5DF1_u7684_u5B50_u9875_u9762_u5E94_u7528__28package_29"><a href="#u521B_u5EFA_u81EA_u5DF1_u7684_u5B50_u9875_u9762_u5E94_u7528__28package_29" class="headerlink" title="创建自己的子页面应用 (package)"></a>创建自己的子页面应用 (package)</h3><p>官方文档中称这样的子页面应用为package，创建自己的package可以通过<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mean package &#60;packageName&#62;</span><br></pre></td></tr></table></figure></p>
<p>创建，这样会自动按照i18n的结构在custom文件夹底下新建一个以packageName 为命名的文件夹，重载之后就可以在导航栏看到package名被添加上去，当然内容和i18n是一样的，要使它符合要求就要修改相关文件。</p>
<p>先写到这里吧改天接上后面的内容继续。</p>

      
    </div>
    <footer>
      
        
        
        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">留言</h1>

  
      <div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789012345";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-comments" data-href="http://mosquito1994.github.io/2015/12/07/mean-io初探/index.html" data-num-posts="5" data-width="840" data-colorscheme="light"></div>
      
  
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:mosquito1994.github.io">
  </form>
</div>

  

  
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2015 mosquito
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>